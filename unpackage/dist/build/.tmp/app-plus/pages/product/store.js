(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/store"],{"5a8b":function(t,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={data:function(){return{payType:1,showPay:!1,payMoney:0,curPayItem:"",list:[]}},onLoad:function(){this.getMyDD()},methods:{getMyDD:function(){var n=this;this.$api.postAPI("points/pointsProductList").then(function(i){if(t.hideLoading(),0!=i.data.code)return t.showToast({title:i.data.msg,icon:"none",duration:3e3});n.list=i.data.data}).catch(function(n){return t.hideLoading(),t.showToast({title:"网络错误",icon:"none",duration:3e3})})},changePayType:function(t){this.payType=t.mp.detail.value},hidePop:function(){var t=this;this.showPay=!this.showPay,setTimeout(function(){t.$refs.masklayer.$el.style.display="none"},200)},toPayPop:function(t){var n=this;this.payMoney=t.price,this.curPayItem=t,this.$refs.masklayer.$el.style.display="block",setTimeout(function(){n.showPay=!0},100)},btnToPay:function(){this.curPayItem&&this.confirm()},getUUID:function(){return"xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,i="x"==t?n:3&n|8;return i.toString(16)})},confirm:function(){var n=this,i=this.getUUID();this.$api.postAPI("points/buyPoints",{outOrderNo:i,productTicketId:this.curPayItem.id}).then(function(i){if(t.hideLoading(),0!=i.data.code)return t.showToast({title:i.data.msg,icon:"none",duration:3e3});n.toPay(i.data.data.orderNo)}).catch(function(n){return t.hideLoading(),t.showToast({title:"网络错误",icon:"none",duration:3e3})})},toPay:function(n){var i=this,o={orderNo:n,payType:this.payType};t.showLoading({title:"正在提交中..."}),this.$api.postAPI("pay/pay",o).then(function(n){if(setTimeout(function(){t.hideLoading()},8e3),0!=n.data.code)return t.showToast({title:n.data.msg,icon:"none",duration:3e3});i.goClientPay(n.data.data)}).catch(function(n){return t.hideLoading(),t.showToast({title:"网络错误",icon:"none",duration:3e3})})},goClientPay:function(n){var i=1==this.payType?"wxpay":"alipay",o=1==this.payType?"Sign=WXPay":"Sign=alipay",a={appid:n.appid,partnerid:n.partnerid,prepayid:n.prepayid,package:o,noncestr:n.noncestr,timestamp:n.timestamp,sign:n.sign};t.requestPayment({provider:i,orderInfo:JSON.stringify(a),success:function(n){t.hideLoading(),console.log("success:"+JSON.stringify(n)," at pages\\product\\store.vue:173"),this.payMessage=n,t.showToast({title:n,icon:"none",duration:3e3}),setTimeout(function(){t.navigateBack()},1500)},fail:function(n){t.hideLoading(),console.log("fail:"+JSON.stringify(n)," at pages\\product\\store.vue:182"),t.showToast({title:"支付失败",icon:"none",duration:3e3})}})}}};n.default=i}).call(this,i("6e42")["default"])},"633f":function(t,n,i){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},a=[];i.d(n,"a",function(){return o}),i.d(n,"b",function(){return a})},7013:function(t,n,i){"use strict";i.r(n);var o=i("633f"),a=i("c862");for(var e in a)"default"!==e&&function(t){i.d(n,t,function(){return a[t]})}(e);i("e11a");var s=i("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);n["default"]=r.exports},"83bb":function(t,n,i){},c862:function(t,n,i){"use strict";i.r(n);var o=i("5a8b"),a=i.n(o);for(var e in o)"default"!==e&&function(t){i.d(n,t,function(){return o[t]})}(e);n["default"]=a.a},e11a:function(t,n,i){"use strict";var o=i("83bb"),a=i.n(o);a.a}},[["6417","common/runtime","common/vendor"]]]);