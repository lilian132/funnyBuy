(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/pay"],{"070b":function(t,n,e){"use strict";e.r(n);var i=e("f428"),a=e("ab15");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("fd49");var r=e("2877"),c=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);n["default"]=c.exports},"7b7c":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={data:function(){return{payType:1,payNumber:0,ticketId:0,price:0,payMessage:""}},computed:{},onLoad:function(t){this.payNumber=t.num,this.price=t.price,this.ticketId=t.id},methods:{changePayType:function(t){this.payType=t.mp.detail.value},getUUID:function(){return"xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,e="x"==t?n:3&n|8;return e.toString(16)})},confirm:function(){var n=this,e=this.getUUID();this.$api.postAPI("points/buyPoints",{outOrderNo:e,productTicketId:this.ticketId}).then(function(e){if(t.hideLoading(),0!=e.data.code)return t.showToast({title:e.data.msg,icon:"none",duration:3e3});n.toPay(e.data.data.orderNo)}).catch(function(n){return t.hideLoading(),t.showToast({title:"网络错误",icon:"none",duration:3e3})})},toPay:function(n){var e=this,i={orderNo:n,payType:this.payType};t.showLoading({title:"正在提交中..."}),this.$api.postAPI("pay/pay",i).then(function(n){if(setTimeout(function(){t.hideLoading()},8e3),0!=n.data.code)return t.showToast({title:n.data.msg,icon:"none",duration:3e3});e.goClientPay(n.data.data)}).catch(function(n){return t.hideLoading(),t.showToast({title:"网络错误",icon:"none",duration:3e3})})},goClientPay:function(n){var e=1==this.payType?"wxpay":"alipay",i=1==this.payType?"Sign=WXPay":"Sign=alipay",a={appid:n.appid,partnerid:n.partnerid,prepayid:n.prepayid,package:i,noncestr:n.noncestr,timestamp:n.timestamp,sign:n.sign};t.requestPayment({provider:e,orderInfo:JSON.stringify(a),success:function(n){t.hideLoading(),console.log("success:"+JSON.stringify(n)," at pages\\order\\pay.vue:140"),this.payMessage=n,t.showToast({title:n,icon:"none",duration:3e3}),setTimeout(function(){t.navigateBack()},1500)},fail:function(n){t.hideLoading(),console.log("fail:"+JSON.stringify(n)," at pages\\order\\pay.vue:149"),t.showToast({title:"支付失败",icon:"none",duration:3e3})}})}}};n.default=e}).call(this,e("6e42")["default"])},"910c":function(t,n,e){},ab15:function(t,n,e){"use strict";e.r(n);var i=e("7b7c"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},f428:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement;t._self._c},a=[];e.d(n,"a",function(){return i}),e.d(n,"b",function(){return a})},fd49:function(t,n,e){"use strict";var i=e("910c"),a=e.n(i);a.a}},[["670d","common/runtime","common/vendor"]]]);