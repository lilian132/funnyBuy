(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/goods"],{"0401":function(e,t,n){},"5b9c":function(e,t,n){"use strict";var a=n("0401"),r=n.n(a);r.a},"720e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,a,r,i,o){try{var u=e[i](o),d=u.value}catch(s){return void n(s)}u.done?t(d):Promise.resolve(d).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function u(e){i(o,a,r,u,d,"next",e)}function d(e){i(o,a,r,u,d,"throw",e)}u(void 0)})}}var u=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"fd3c"))},d=function(){return n.e("components/uni-countdown/uni-countdown").then(n.bind(null,"c7cc"))},s={components:{uniLoadMore:u,uniCountdown:d},data:function(){return{tabCurrentIndex:0,pageSize:10,navList:[{currentPageIndex:1,text:"全部",loadingType:"more",orderList:[]},{currentPageIndex:1,text:"抢购中",loadingType:"more",orderList:[]},{currentPageIndex:1,text:"已抢中",loadingType:"more",orderList:[]},{currentPageIndex:1,text:"未抢中",loadingType:"more",orderList:[]}]}},onLoad:function(e){this.tabCurrentIndex=+e.state,this.loadData()},filters:{covertDate:function(e){return e?new Date(e).Format("yyyy-MM-dd hh:mm:ss"):""}},methods:{btn:function(){e.switchTab({url:"/pages/session/primarys"})},loadData:function(e){var t=this.tabCurrentIndex,n=this.navList[t];"tabChange"===e&&!0===n.loaded||"loading"!==n.loadingType&&"noMore"!==n.loadingType&&(n.loadingType="loading",this.getData(this.tabCurrentIndex))},changeTab:function(){var e=o(a.default.mark(function e(t){return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.tabCurrentIndex=t.target.current,this.loadData("tabChange");case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),tabClick:function(e){this.tabCurrentIndex=e},getData:function(t){var n=this;t=t||0;var a=this.navList[t],r={currentPage:a.currentPageIndex,data:{},pageSize:this.pageSize};t>0&&(r.data.status=t),this.$api.postAPI("guess/myGuessList",r).then(function(t){if(e.hideLoading(),n.$set(a,"loaded",!0),0!=t.data.code)return e.showToast({title:t.data.msg,icon:"none",duration:3e3});if(a.orderList.length>0){var r=n.handlerData(t.data.timestamp,t.data.data.data);a.orderList=a.orderList.concat(r),r.length<n.pageSize?a.loadingType="noMore":(a.currentPageIndex++,a.loadingType="more")}else a.orderList=n.handlerData(t.data.timestamp,t.data.data.data),a.orderList.length<n.pageSize?a.loadingType="noMore":(a.currentPageIndex++,a.loadingType="more")}).catch(function(t){return e.hideLoading(),e.showToast({title:"网络错误",icon:"none",duration:3e3})})},handlerData:function(e,t){var n=[].concat(t),a=!0,r=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var d=o.value;this.handlerTime(e,d)}}catch(s){r=!0,i=s}finally{try{a||null==u.return||u.return()}finally{if(r)throw i}}return n},handlerTime:function(e,t){var n=this,a=new Date(e||t.currentTime);if(e&&(t.currentTime=e),1==t.executeStatus){var r=new Date(t.guessEndTime),i=r.getTime()-a.getTime();t.tips="距结束",t.isRefreshTime=!1,this.$nextTick(function(){t.isRefreshTime=!0,t.countdownTime=i>0?n.getMSDate(i):[0,0,0]})}else if(2==t.executeStatus){var o=new Date(t.lotteryTime),u=new Date(t.guessEndTime),d=u.getTime()-a.getTime();a=a.getTime()+d+1e3;var s=o.getTime()-a;t.tips="结果确认中",t.isRefreshTime=!1,this.$nextTick(function(){t.isRefreshTime=!0,t.countdownTime=s>0?n.getMSDate(s):[0,0,0]})}},getMSDate:function(e){Math.floor(e/864e5);var t=e%864e5,n=Math.floor(t/36e5),a=t%36e5,r=Math.floor(a/6e4),i=a%6e4,o=Math.round(i/1e3);return[n,r,o]},timeup:function(e){var t=this;1==e.executeStatus?(e.tips="获取中...",e.isRefreshTime=!1,setTimeout(function(){e.executeStatus=2,t.handlerTime(null,e)},1e3)):2==e.executeStatus&&(e.executeStatus=3,e.tips="获取中...",e.isRefreshTime=!1,setTimeout(function(){t.navList=[{currentPageIndex:1,text:"全部",loadingType:"more",orderList:[]},{currentPageIndex:1,text:"抢购中",loadingType:"more",orderList:[]},{currentPageIndex:1,text:"已抢中",loadingType:"more",orderList:[]},{currentPageIndex:1,text:"未抢中",loadingType:"more",orderList:[]}],t.loadData("tabChange")},3e3))},toDetail:function(t){e.navigateTo({url:"/pages/product/detail?periodId=".concat(t.periodId)})},toNextQi:function(t){this.$api.postAPI("period/nextNewPeroid",{id:t.periodId}).then(function(t){if(e.hideLoading(),0!=t.data.code)return e.showToast({title:t.data.msg,icon:"none",duration:3e3});e.navigateTo({url:"/pages/product/detail?periodId=".concat(t.data.data.id)})}).catch(function(t){return e.hideLoading(),e.showToast({title:"网络错误",icon:"none",duration:3e3})})}}};t.default=s}).call(this,n("6e42")["default"])},"79dc":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.navList,function(t,n){var a=e.__map(t.orderList,function(t,n){var a=e._f("covertDate")(t.guessStartTime);return{$orig:e.__get_orig(t),f0:a}});return{$orig:e.__get_orig(t),l0:a}}));e.$mp.data=Object.assign({},{$root:{l1:n}})},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},"82c3":function(e,t,n){"use strict";n.r(t);var a=n("720e"),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=r.a},f35d:function(e,t,n){"use strict";n.r(t);var a=n("79dc"),r=n("82c3");for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n("5b9c");var o=n("2877"),u=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,null,null);t["default"]=u.exports}},[["2c0c","common/runtime","common/vendor"]]]);