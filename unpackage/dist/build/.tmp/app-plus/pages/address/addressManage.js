(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{"6d0b":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},a=[];i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a})},be38:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){return i.e("components/mpvue-citypicker/mpvueCityPicker").then(i.bind(null,"7e43"))},a={components:{mpvueCityPicker:s},data:function(){return{editType:"add",id:"",name:"",tel:"",detailed:"",isDefault:!1,cityPickerValue:[0,0,0],themeColor:"#007AFF",region:{label:"省市区县、乡镇",value:[],cityCode:""},addressStr:[],addressStrText:"",addressCode:[]}},onLoad:function(t){if(this.editType=t.type,"edit"==t.type){var i=JSON.parse(decodeURIComponent(t.data));console.log(i," at pages\\address\\addressManage.vue:69"),this.id=i.id,this.name=i.name,this.tel=i.moblie,this.detailed=i.address,this.isDefault=!!i.isDefault||!1,this.cityPickerValue=[i.provinceId,i.cityId,i.areaId],e.setNavigationBarTitle({title:"修改收货地址"})}else e.setNavigationBarTitle({title:"新增地址"})},methods:{onCancel:function(e){console.log(e," at pages\\address\\addressManage.vue:87")},chooseCity:function(){this.$refs.mpvueCityPicker.show()},onConfirm:function(e){console.log(e," at pages\\address\\addressManage.vue:93"),this.cityPickerValue=e.value,this.addressStrText=e.label,this.addressStr=e.label.split("-"),this.addressCode=e.code.split("-")},isDefaultChange:function(e){this.isDefault=!this.isDefault},btnDel:function(){this.delData()},delData:function(){e.showLoading({title:"正在提交"}),this.$api.postAPI("address/deleteAddress",{id:this.id}).then(function(t){if(e.hideLoading(),0!=t.data.code)return e.showToast({title:t.data.msg,icon:"none",duration:3e3});e.showToast({title:"删除成功",duration:3e3}),setTimeout(function(){e.navigateBack()},1500)}).catch(function(t){return e.hideLoading(),e.showToast({title:"网络错误",icon:"none",duration:3e3})})},save:function(){var t=this,i={name:this.name,tel:this.tel,address:{detailed:this.detailed},isDefault:this.isDefault};if("edit"==this.editType&&(i.id=this.id),i.name)if(i.tel){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(i.tel))return e.showToast({title:"请填写正确手机号码",icon:"none"}),!1;if(i.address.detailed)if(0!=this.addressStr.length){e.showLoading({title:"正在提交"});var s={address:this.detailed,areaId:this.addressCode[2],areaName:this.addressStr[2],cityId:this.addressCode[1],cityName:this.addressStr[1],moblie:this.tel,name:this.name,proviceName:this.addressStr[0],provinceId:this.addressCode[0],isDefault:this.isDefault?1:0},a="address/addAddress";"edit"==this.editType&&(s.id=this.id,a="address/modifyAddress"),this.$api.postAPI(a,s).then(function(i){if(e.hideLoading(),0!=i.data.code)return e.showToast({title:i.data.msg,icon:"none",duration:3e3});e.showToast({title:"edit"==t.editType?"修改成功":"添加成功",duration:3e3}),setTimeout(function(){e.navigateTo({url:"/pages/address/addres?title=addres"})},1500)}).catch(function(t){return e.hideLoading(),e.showToast({title:"网络错误",icon:"none",duration:3e3})})}else e.showToast({title:"请选择收件地址",icon:"none"});else e.showToast({title:"请输入收件人详细地址",icon:"none"})}else e.showToast({title:"电话号码不能为空",icon:"none"});else e.showToast({title:"请输入收件人姓名",icon:"none"})}},onBackPress:function(){if(this.$refs.mpvueCityPicker.showPicker)return this.$refs.mpvueCityPicker.pickerCancel(),!0},onUnload:function(){this.$refs.mpvueCityPicker.showPicker&&this.$refs.mpvueCityPicker.pickerCancel()}};t.default=a}).call(this,i("6e42")["default"])},c6db:function(e,t,i){},db3f:function(e,t,i){"use strict";i.r(t);var s=i("6d0b"),a=i("e659");for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);i("f1fd");var d=i("2877"),o=Object(d["a"])(a["default"],s["a"],s["b"],!1,null,null,null);t["default"]=o.exports},e659:function(e,t,i){"use strict";i.r(t);var s=i("be38"),a=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);t["default"]=a.a},f1fd:function(e,t,i){"use strict";var s=i("c6db"),a=i.n(s);a.a}},[["690f","common/runtime","common/vendor"]]]);