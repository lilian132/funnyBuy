(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-address-addressManage"],{"0d0b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{pickerValue:[0,0,0],provinceData:[],cityData:[],areaData:[],provinceDataList:[],cityDataList:[],areaDataList:[],showPicker:!1}},created:function(){this.init()},props:{pickerValueDefault:{type:Array,default:function(){return[0,0,0]}},themeColor:String},methods:{init:function(){var t=this;this.getProvice(function(e){t.provinceData=e,t.provinceDataList=t.provinceData;var i=e[0].id;if(0!=t.pickerValueDefault[0]){i=e.find(function(e){return e.id==t.pickerValueDefault[0]}).id||0;var a=e.findIndex(function(e){return e.id==t.pickerValueDefault[0]});t.$set(t.pickerValue,0,a>=0?a:0)}e&&e.length&&t.getCityOrArea(i,function(e){t.cityData=e,t.cityDataList=t.cityData;var i=e[0].id;if(0!=t.pickerValueDefault[1]){i=e.find(function(e){return e.id==t.pickerValueDefault[1]}).id||0;var a=e.findIndex(function(e){return e.id==t.pickerValueDefault[1]});t.$set(t.pickerValue,1,a>=0?a:0)}e&&0==e.length&&t.pickerValueDefault!=[0,0,0]&&t._$emit("onConfirm"),e&&e.length&&t.getCityOrArea(i,function(e){if(t.areaData=e,t.areaDataList=t.areaData,0!=t.pickerValueDefault[2]){var i=e.findIndex(function(e){return e.id==t.pickerValueDefault[2]});t.$set(t.pickerValue,2,i>=0?i:0),t._$emit("onConfirm")}})})})},show:function(){var t=this;setTimeout(function(){t.showPicker=!0},0)},maskClick:function(){this.pickerCancel()},pickerCancel:function(){this.showPicker=!1,this._$emit("onCancel")},pickerConfirm:function(t){this.showPicker=!1,this._$emit("onConfirm")},showPickerView:function(){this.showPicker=!0},pickerChange:function(t){var e=this,i=t.mp.detail.value;if(this.pickerValue[0]!==i[0]){var a=this.provinceData[i[0]].id;this.getCityOrArea(a,function(t){e.cityData=t,e.cityDataList=e.cityData,i[1]=0,i[2]=0;var a=e.cityData[0].id;e.getCityOrArea(a,function(t){e.areaData=t,e.areaDataList=e.areaData,e.pickerValue=i,e._$emit("onChange")})})}else if(this.pickerValue[1]!==i[1]){var n=this.cityData[i[1]].id;this.getCityOrArea(n,function(t){e.areaData=t,e.areaDataList=e.areaData,i[2]=0,e.pickerValue=i,e._$emit("onChange")})}},_$emit:function(t){var e={label:this._getLabel(),value:this.pickerValue,cityCode:this._getCityCode(),code:this._getCode()};this.$emit(t,e)},_getLabel:function(){var t=this.provinceDataList[this.pickerValue[0]].label+"-"+this.cityDataList[this.pickerValue[1]].label+"-"+(this.areaDataList[this.pickerValue[2]]?this.areaDataList[this.pickerValue[2]].label:"");return t},_getCode:function(){var t=this.provinceDataList[this.pickerValue[0]].value+"-"+this.cityDataList[this.pickerValue[1]].value+"-"+(this.areaDataList[this.pickerValue[2]]?this.areaDataList[this.pickerValue[2]].value:0);return t},_getCityCode:function(){return this.areaDataList[this.pickerValue[2]]?this.areaDataList[this.pickerValue[2]].value:0},getProvice:function(t){this.$api.postAPI("common/getAllProvince").then(function(e){if(uni.hideLoading(),0!=e.data.code)return uni.showToast({title:e.data.msg,icon:"none",duration:3e3});var i=0==e.data.code?e.data.data:[],a=i.map(function(t){return t.value=t.id,t.label=t.name,t});t&&t(a)}).catch(function(t){return uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none",duration:3e3})})},getCityOrArea:function(t,e){this.$api.postAPI("common/getArea/".concat(t)).then(function(t){if(uni.hideLoading(),0!=t.data.code)return uni.showToast({title:t.data.msg,icon:"none",duration:3e3});var i=0==t.data.code?t.data.data:[],a=i.map(function(t){return t.value=t.id,t.label=t.name,t});e&&e(a)}).catch(function(t){return uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none",duration:3e3})})}}};e.default=a},"1fe98":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.pickerMask[data-v-83c96bf2]{position:fixed;z-index:1000;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.6)}.mpvue-picker-content[data-v-83c96bf2]{position:fixed;bottom:0;left:0;width:100%;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);z-index:3000}.mpvue-picker-view-show[data-v-83c96bf2]{-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}.mpvue-picker__hd[data-v-83c96bf2]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:9px 15px;background-color:#fff;position:relative;text-align:center;font-size:17px}.mpvue-picker__hd[data-v-83c96bf2]:after{content:" ";position:absolute;left:0;bottom:0;right:0;height:1px;border-bottom:1px solid #e5e5e5;color:#e5e5e5;-webkit-transform-origin:0 100%;-ms-transform-origin:0 100%;transform-origin:0 100%;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5)}.mpvue-picker__action[data-v-83c96bf2]{display:block;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;color:#ff5847}.mpvue-picker__action[data-v-83c96bf2]:first-child{text-align:left;color:#ff5847}.mpvue-picker__action[data-v-83c96bf2]:last-child{text-align:right}.mpvue-address[data-v-83c96bf2]{font-size:%?32?%;font-family:PingFangSC-Regular;font-weight:400;color:#000}.picker-item[data-v-83c96bf2]{text-align:center;line-height:40px;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;font-size:16px}.mpvue-picker-view[data-v-83c96bf2]{position:relative;bottom:0;left:0;width:100%;height:238px;background-color:#fff}',""])},"225d":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-3ff64cac]{background:#f5f5f5}.right-del[data-v-3ff64cac]{position:fixed;top:0;right:0;padding:0 %?30?%;height:%?88?%;line-height:%?88?%;z-index:999}.content[data-v-3ff64cac] .uni-checkbox-input{border-radius:100%}.content[data-v-3ff64cac] .uni-checkbox-input-checked{color:#fff!important;background-color:#fa436a}.content[data-v-3ff64cac]{margin:%?30?% %?30?%;background:#fff;border-radius:%?20?%;height:%?563?%}.content .phone[data-v-3ff64cac]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:%?140?%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-bottom:%?1?% solid #e0e7eb}.content .phone uni-text[data-v-3ff64cac]{width:%?172?%;height:%?140?%;font-size:%?30?%;font-family:PingFangSC-Regular;font-weight:400;color:#4a4a4a;text-align:center;line-height:%?140?%}.content .phone .name[data-v-3ff64cac]{width:%?450?%;height:%?80?%;border-radius:%?10?%;border:%?2?% solid #e4e4e4}.content .phone .name .regise[data-v-3ff64cac]{line-height:%?80?%;padding-left:%?25?%;color:#9b9b9b}.content .phone .name uni-input[data-v-3ff64cac]{padding:%?15?% 0 %?20?% %?30?%;font-size:%?28?%;font-family:PingFangSC-Regular;font-weight:400}.content .set[data-v-3ff64cac]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:%?20?% 0 0 0}.content .set uni-text[data-v-3ff64cac]{font-size:%?30?%;font-family:PingFangSC-Regular;font-weight:400;color:#4a4a4a}.content .set .set-box[data-v-3ff64cac]{margin-left:%?30?%}.content .set .set-box .radio[data-v-3ff64cac]{width:%?18?%;height:%?18?%}.content .flex-blue[data-v-3ff64cac]{margin-top:%?60?%;height:%?80?%;margin:%?150?% %?85?% 0 %?85?%}.content .flex-blue uni-button[data-v-3ff64cac]{background:#ff5847}body.?%PAGE?%[data-v-3ff64cac]{background:#f5f5f5}',""])},"40c4":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},["edit"==t.editType?i("v-uni-view",{staticClass:"right-del",on:{click:function(e){e=t.$handleEvent(e),t.btnDel(e)}}},[t._v("删除")]):t._e(),i("v-uni-view",{staticClass:"phone"},[i("v-uni-text",[t._v("收件人")]),i("v-uni-view",{staticClass:"name"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请填写收件人姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),i("v-uni-view",{staticClass:"phone"},[i("v-uni-text",[t._v("手机号码")]),i("v-uni-view",{staticClass:"name"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请填写收货人手机号码"},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}})],1)],1),i("v-uni-view",{staticClass:"phone"},[i("v-uni-text",[t._v("选择地区")]),i("v-uni-view",{staticClass:"name",on:{click:function(e){e=t.$handleEvent(e),t.chooseCity(e)}}},[i("v-uni-view",{staticClass:"regise"},[t._v(t._s(""!=t.addressStrText?t.addressStrText:"省市区县、乡镇"))])],1)],1),i("v-uni-view",{staticClass:"phone"},[i("v-uni-text",[t._v("详细地址")]),i("v-uni-view",{staticClass:"name"},[i("v-uni-input",{attrs:{type:"text",placeholder:"街道、楼牌号等"},model:{value:t.detailed,callback:function(e){t.detailed=e},expression:"detailed"}})],1)],1),i("v-uni-view",{staticClass:"set"},[i("v-uni-text",[t._v("设置为默认地址")]),i("v-uni-view",{staticClass:"set-box"},[i("v-uni-label",{staticClass:"radio"},[i("v-uni-checkbox-group",{on:{change:function(e){e=t.$handleEvent(e),t.isDefaultChange(e)}}},[i("v-uni-checkbox",{attrs:{checked:t.isDefault}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"flex-blue"},[i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){e=t.$handleEvent(e),t.save(e)}}},[t._v("保存")])],1),i("mpvue-city-picker",{ref:"mpvueCityPicker",attrs:{themeColor:t.themeColor,pickerValueDefault:t.cityPickerValue},on:{onCancel:function(e){e=t.$handleEvent(e),t.onCancel(e)},onConfirm:function(e){e=t.$handleEvent(e),t.onConfirm(e)}}})],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"51b0":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mpvue-picker"},[i("div",{class:{pickerMask:t.showPicker},attrs:{catchtouchmove:"true"},on:{click:function(e){e=t.$handleEvent(e),t.maskClick(e)}}}),i("div",{staticClass:"mpvue-picker-content ",class:{"mpvue-picker-view-show":t.showPicker}},[i("div",{staticClass:"mpvue-picker__hd",attrs:{catchtouchmove:"true"}},[i("div",{staticClass:"mpvue-picker__action",on:{click:function(e){e=t.$handleEvent(e),t.pickerCancel(e)}}},[t._v("取消")]),i("div",{staticClass:"mpvue-address"},[t._v("选择地址")]),i("div",{staticClass:"mpvue-picker__action",on:{click:function(e){e=t.$handleEvent(e),t.pickerConfirm(e)}}},[t._v("确定")])]),i("v-uni-picker-view",{staticClass:"mpvue-picker-view",attrs:{"indicator-style":"height: 40px;",value:t.pickerValue},on:{change:function(e){e=t.$handleEvent(e),t.pickerChange(e)}}},[[i("v-uni-picker-view-column",t._l(t.provinceDataList,function(e,a){return i("div",{key:a,staticClass:"picker-item"},[t._v(t._s(e.label))])}),0),i("v-uni-picker-view-column",t._l(t.cityDataList,function(e,a){return i("div",{key:a,staticClass:"picker-item"},[t._v(t._s(e.label))])}),0),i("v-uni-picker-view-column",t._l(t.areaDataList,function(e,a){return i("div",{key:a,staticClass:"picker-item"},[t._v(t._s(e.label))])}),0)]],2)],1)])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"59c7":function(t,e,i){"use strict";var a=i("ee5d"),n=i.n(a);n.a},"5c48":function(t,e,i){"use strict";i.r(e);var a=i("0d0b"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},"719c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("7e43"));function n(t){return t&&t.__esModule?t:{default:t}}var s={components:{mpvueCityPicker:a.default},data:function(){return{editType:"add",id:"",name:"",tel:"",detailed:"",isDefault:!1,cityPickerValue:[0,0,0],themeColor:"#007AFF",region:{label:"省市区县、乡镇",value:[],cityCode:""},addressStr:[],addressStrText:"",addressCode:[]}},onLoad:function(t){if(this.editType=t.type,"edit"==t.type){var e=JSON.parse(decodeURIComponent(t.data));console.log(e),this.id=e.id,this.name=e.name,this.tel=e.moblie,this.detailed=e.address,this.isDefault=!!e.isDefault||!1,this.cityPickerValue=[e.provinceId,e.cityId,e.areaId],uni.setNavigationBarTitle({title:"修改收货地址"})}else uni.setNavigationBarTitle({title:"新增地址"})},methods:{onCancel:function(t){console.log(t)},chooseCity:function(){this.$refs.mpvueCityPicker.show()},onConfirm:function(t){this.cityPickerValue=t.value,this.addressStrText=t.label,this.addressStr=t.label.split("-"),this.addressCode=t.code.split("-")},isDefaultChange:function(t){this.isDefault=!this.isDefault},btnDel:function(){this.delData()},delData:function(){uni.showLoading({title:"正在提交"}),this.$api.postAPI("address/deleteAddress",{id:this.id}).then(function(t){if(uni.hideLoading(),0!=t.data.code)return uni.showToast({title:t.data.msg,icon:"none",duration:3e3});uni.showToast({title:"删除成功",duration:3e3}),setTimeout(function(){uni.navigateBack()},1500)}).catch(function(t){return uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none",duration:3e3})})},save:function(){var t=this,e={name:this.name,tel:this.tel,address:{detailed:this.detailed},isDefault:this.isDefault};if("edit"==this.editType&&(e.id=this.id),e.name)if(e.tel){if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(e.tel))return uni.showToast({title:"请填写正确手机号码",icon:"none"}),!1;if(e.address.detailed)if(0!=this.addressStr.length){uni.showLoading({title:"正在提交"});var i={address:this.detailed,areaId:this.addressCode[2],areaName:this.addressStr[2],cityId:this.addressCode[1],cityName:this.addressStr[1],moblie:this.tel,name:this.name,proviceName:this.addressStr[0],provinceId:this.addressCode[0],isDefault:this.isDefault?1:0},a="address/addAddress";"edit"==this.editType&&(i.id=this.id,a="address/modifyAddress"),this.$api.postAPI(a,i).then(function(e){if(uni.hideLoading(),0!=e.data.code)return uni.showToast({title:e.data.msg,icon:"none",duration:3e3});uni.showToast({title:"edit"==t.editType?"修改成功":"添加成功",duration:3e3}),setTimeout(function(){uni.navigateBack()},1500)}).catch(function(t){return uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none",duration:3e3})})}else uni.showToast({title:"请选择收件地址",icon:"none"});else uni.showToast({title:"请输入收件人详细地址",icon:"none"})}else uni.showToast({title:"电话号码不能为空",icon:"none"});else uni.showToast({title:"请输入收件人姓名",icon:"none"})}},onBackPress:function(){if(this.$refs.mpvueCityPicker.showPicker)return this.$refs.mpvueCityPicker.pickerCancel(),!0},onUnload:function(){this.$refs.mpvueCityPicker.showPicker&&this.$refs.mpvueCityPicker.pickerCancel()}};e.default=s},"7e43":function(t,e,i){"use strict";i.r(e);var a=i("51b0"),n=i("5c48");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("59c7");var o=i("2877"),r=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"83c96bf2",null);e["default"]=r.exports},a57f:function(t,e,i){"use strict";var a=i("f0d5"),n=i.n(a);n.a},db3f:function(t,e,i){"use strict";i.r(e);var a=i("40c4"),n=i("e659");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("a57f");var o=i("2877"),r=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"3ff64cac",null);e["default"]=r.exports},e659:function(t,e,i){"use strict";i.r(e);var a=i("719c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},ee5d:function(t,e,i){var a=i("1fe98");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("53871062",a,!0,{sourceMap:!1,shadowMode:!1})},f0d5:function(t,e,i){var a=i("225d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("6fb02196",a,!0,{sourceMap:!1,shadowMode:!1})}}]);